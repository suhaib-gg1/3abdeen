<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>عابدين</title>
<link rel="icon" type="image/x-icon" href="logo1.icon">
<link rel="shortcut icon" type="image/x-icon" href="logo1.icon">
<!-- Apply saved theme before CSS loads to avoid flash -->
<script>
  try {
    var t = localStorage.getItem('theme');
    if (t === 'dark') {
      document.documentElement.classList.add('dark');
    }
  } catch (e) {}
</script>
<link rel="stylesheet" href="styles.css">
<script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>

<header>
  <h1>🌙 عابدين</h1>
  <div class="header-controls">
    <div class="tabs">
      <button class="tab-btn active" id="tab-worship">
        <i data-lucide="heart"></i> عباداتي
      </button>
      <button class="tab-btn" id="tab-community">
        <i data-lucide="users"></i> تحدياتي
      </button>
    </div>
    <button id="hamburger-menu" class="hamburger-btn" aria-label="القائمة"><span></span><span></span><span></span></button>
  </div>
  <div id="side-menu" class="side-menu hidden">
    <button id="toggle-dark-menu" class="side-menu-item">🌙 الوضع الليلي</button>
  </div>
</header>

<div id="clock"></div>

<div id="worship-section" class="content-section active">
  <main>
    <!-- الصلاة -->
    <div class="card">
      <button class="card-header" id="btn-salah">
        <span><i data-lucide="sun"></i> الصلوات</span>
        <i id="arrow-salah" data-lucide="chevron-down"></i>
      </button>
      <div id="salah" class="card-content hidden">
        <p class="text-sm">الأوقات اليومية من الإنترنت</p>
        <ul id="prayer-times"></ul>
      </div>
    </div>

    <!-- القرآن -->
    <div class="card">
      <button class="card-header" id="btn-quran">
        <span><i data-lucide="book"></i> القرآن</span>
        <i id="arrow-quran" data-lucide="chevron-down"></i>
      </button>
      <div id="quran" class="card-content hidden">
        <label>اختر وردك:</label>
        <select id="quran-choice">
          <option value="rubu">ربع حزب (2.5 صفحة)</option>
          <option value="hizb">حزب (10 صفحات)</option>
          <option value="juz">جزء (20 صفحة)</option>
        </select>
        <div class="progress-bar-bg"><div id="quran-progress" class="progress-bar-fill quran-fill" style="width:0%;"></div></div>
        <button onclick="updateQuranProgress()" class="btn btn-green">أنجزت وردي</button>
      </div>
    </div>

    <!-- الأذكار -->
    <div class="card">
      <button class="card-header" id="btn-azkar">
        <span><i data-lucide="heart"></i> الأذكار (قريبًا)</span>
       <!-- <i id="arrow-azkar" data-lucide="chevron-down"></i>
      </button>
      <div id="azkar" class="card-content hidden">
        <p>اذكر الله ٣ مرات:</p>
        <button onclick="doneDhikr()" class="btn btn-blue">ذكرت</button>
        <div class="progress-bar-bg"><div id="dhikr-progress" class="progress-bar-fill dhikr-fill" style="width:0%;"></div></div>
      </div>-->
    </div>

    <!-- الامتنان -->
    <div class="card">
      <button class="card-header" id="btn-gratitude">
        <span><i data-lucide="smile"></i> الامتنان</span>
        <i id="arrow-gratitude" data-lucide="chevron-down"></i>
      </button>
      <div id="gratitude" class="card-content hidden">
        <textarea id="gratitude-text" placeholder="اكتب شيئا جميلا حدث اليوم"></textarea>
        <button onclick="saveGratitude()" class="btn btn-purple">حفظ</button>
      </div>
    </div>
  </main>
</div>

<div id="community-section" class="content-section">
  <!-- تبويب التحديات -->
  <div class="community-tab">
    <div class="community-header">
     <h1 class="soon"> قريبا</h1>
  </div>
</div>

<script src="script.js"></script>
<script>
// قائمة الهبرغر
const hamburger = document.getElementById('hamburger-menu');
const sideMenu = document.getElementById('side-menu');
hamburger.addEventListener('click', () => {
  sideMenu.classList.toggle('hidden');
});
// إغلاق القائمة عند الضغط خارجها
window.addEventListener('click', (e) => {
  if (!sideMenu.contains(e.target) && !hamburger.contains(e.target)) {
    sideMenu.classList.add('hidden');
  }
});
// تفعيل الوضع الليلي من القائمة
const toggleDarkMenu = document.getElementById('toggle-dark-menu');
toggleDarkMenu.addEventListener('click', () => {
  document.documentElement.classList.toggle('dark');
  try {
    localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
  } catch (e) { console.warn('Storage not available'); }
  sideMenu.classList.add('hidden');
});
</script>
</body>
</html>